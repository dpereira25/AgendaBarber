{% extends "base.html" %} 
{% load static %}
{% block content %}

<div class="container my-5">
    <h1 class="mb-4">2. Horas Disponibles para tu Cita</h1>
    <p>Barbero: <strong>{{ barbero.nombre }}</strong></p>
    <p>Servicio: <strong>{{ servicio.nombre }}</strong></p>
    <p>Fecha: <strong>{{ fecha_seleccionada|date:"l, d/m/Y" }}</strong></p>
    
    <hr>
    
    {% if slots_disponibles %}
        <h3 class="mt-4">Selecciona una hora:</h3>
        <div class="d-flex flex-wrap gap-2">
            
            {% for slot in slots_disponibles %}
                
                <form method="POST" action="{% url 'crear_reserva' %}" class="d-inline">
                    {% csrf_token %}
                    
                    <input type="hidden" name="barbero" value="{{ barbero.id }}">
                    <input type="hidden" name="servicio" value="{{ servicio.id }}">
                    
                    <input type="hidden" name="inicio" value="{{ slot|date:'Y-m-d H:i:s' }}">
                    
                    <button type="submit" class="btn btn-outline-primary">
                        {{ slot|date:"H:i" }}
                    </button>
                    
                </form>
                
            {% endfor %}
            
        </div>
    {% else %}
        <div class="alert alert-warning mt-4" role="alert">
            ❌ ¡Lo sentimos! No hay horas disponibles para los criterios seleccionados. Por favor, intenta con otra fecha o barbero.
        </div>
    {% endif %}

    <a href="{% url 'seleccionar_slot' %}" class="btn btn-secondary mt-5">← Cambiar Opciones</a>
</div>

{% endblock %}